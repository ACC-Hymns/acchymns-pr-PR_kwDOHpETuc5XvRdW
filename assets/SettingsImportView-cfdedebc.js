import{d as T,b as H,G as B,a2 as E,r as V,N as U,h as c,i as e,I as D,U as L,m as h,F as w,p as y,j as r,q as v,w as d,a3 as b,s as i,k as x,a4 as I,R as f,y as N,z as A,B as F,C as O,a5 as P,E as j}from"./index-b39dd122.js";import{_ as q}from"./chevron-back-outline-34d672dd.js";import{_ as W}from"./home-outline-4d004086.js";import{_ as X}from"./settings-ef33e00d.js";import{T as _}from"./index-eaaf5e4b.js";import{u as z}from"./navigator-de8367e9.js";import{u as G}from"./preferences-5ec6b9b4.js";const M="/acchymns-pr-PR_kwDOHpETuc5XvRdW/assets/enter-outline.svg",C="/acchymns-pr-PR_kwDOHpETuc5XvRdW/assets/alert-circle-outline.svg",J="/acchymns-pr-PR_kwDOHpETuc5XvRdW/assets/close.svg",s=u=>(N("data-v-2ebe20d3"),u=u(),A(),u),K={class:"menu"},Q={class:"title"},Y=s(()=>e("h1",{class:"title--center"},"Import Hymnals",-1)),Z={class:"main-content"},ee={class:"input-option reference-option"},te=["disabled"],se=s(()=>e("img",{class:"ionicon enter-button-icon",src:M},null,-1)),oe=[se],ne={key:0},ae={key:1,class:"warning-label-container"},ie=s(()=>e("img",{class:"ionicon warning-icon",src:C},null,-1)),le=s(()=>e("h5",{class:"warning-label"},"The hymnals below require an internet connection",-1)),ce=[ie,le],re=["onClick"],_e=s(()=>e("img",{class:"ionicon ionicon-custom booktext--right add-button-icon",src:P},null,-1)),de=[_e],ue={key:2},me={key:3,class:"warning-label-container"},pe=s(()=>e("img",{class:"ionicon warning-icon",src:C},null,-1)),he=s(()=>e("h5",{class:"warning-label"},"The hymnals below require an internet connection",-1)),ve=[pe,he],fe={style:{"padding-bottom":"200px"}},we=["onClick"],ge=s(()=>e("img",{class:"ionicon ionicon-custom add-button-icon",src:J},null,-1)),ke=[ge],ye={class:"nav"},be=s(()=>e("img",{class:"ionicon nav__icon",src:W},null,-1)),xe=s(()=>e("span",{class:"nav__text"},"Home",-1)),Ie=s(()=>e("img",{class:"ionicon nav__icon",src:F},null,-1)),Ce=s(()=>e("span",{class:"nav__text"},"Search",-1)),Se=s(()=>e("img",{class:"ionicon nav__icon",src:O},null,-1)),$e=s(()=>e("span",{class:"nav__text"},"Bookmarks",-1)),Re=s(()=>e("img",{class:"ionicon nav__icon--active",src:X},null,-1)),Te=s(()=>e("span",{class:"nav__text"},"Settings",-1)),He=T({__name:"SettingsImportView",setup(u){z();const a=G("externalBooks",[]);let g=H("import_books_tooltip_complete",!1);const m=B(()=>Object.values(E).filter(o=>!a.value.includes(o))),p=V("");async function k(o,n=!0){let t=null;try{const l=new AbortController,R=setTimeout(()=>l.abort(),2e3);t=await fetch(o+"/summary.json",{method:"HEAD",signal:l.signal}),clearTimeout(R)}catch(l){if(l.name=="TypeError")return await _.show({text:"Failed to load hymnal!"}),!1;if(l.name!="AbortError")throw l}return t==null||!t.ok||t.status!=200?(await _.show({text:"Failed to load hymnal!"}),!1):a.value.includes(o)?(await _.show({text:"Hymnal already imported!"}),!1):(a.value.push(o),n&&await _.show({text:"Successfully imported hymnal!"}),!0)}async function S(o){if(o in b){const n=b[o];a.value.includes(n)?await _.show({text:`Hymnal (${o}) already imported!`}):await k(n,!1)&&await _.show({text:`Successfully imported hymnal (${o})!`})}else await _.show({text:`Unknown hymnal reference (${o})!`})}U(()=>{g.value||(g.value=!0)});function $(o){a.value=a.value.filter(n=>n!=o)}return(o,n)=>(i(),c(w,null,[e("div",K,[e("div",Q,[e("img",{onClick:n[0]||(n[0]=t=>o.$router.back()),class:"ionicon title--left",src:q}),Y])]),e("div",Z,[e("div",ee,[D(e("input",{"onUpdate:modelValue":n[1]||(n[1]=t=>p.value=t),type:"text",class:"search-bar",placeholder:"Reference"},null,512),[[L,p.value,void 0,{trim:!0}]]),e("a",{disabled:p.value.length===0,onClick:n[2]||(n[2]=t=>S(p.value)),class:"reference-button"},oe,8,te)]),m.value.length!=0?(i(),c("h2",ne,"Available Hymnals")):h("",!0),m.value.length!=0?(i(),c("div",ae,ce)):h("",!0),e("div",null,[(i(!0),c(w,null,y(m.value,t=>(i(),x(I,{key:t,src:t,"with-link":!1},{default:d(()=>[e("button",{onClick:l=>k(t)},de,8,re)]),_:2},1032,["src"]))),128))]),r(a).length!=0?(i(),c("h2",ue,"Imported Hymnals")):h("",!0),r(a).length!=0&&m.value.length==0?(i(),c("div",me,ve)):h("",!0),e("div",fe,[(i(!0),c(w,null,y(r(a),t=>(i(),x(I,{id:"import-book",key:t,src:t,"with-link":!1},{default:d(()=>[e("button",{onClick:l=>$(t)},ke,8,we)]),_:2},1032,["src"]))),128))])]),e("nav",ye,[v(r(f),{to:"/",class:"nav__link"},{default:d(()=>[be,xe]),_:1}),v(r(f),{to:"/search",class:"nav__link"},{default:d(()=>[Ie,Ce]),_:1}),v(r(f),{to:"/bookmarks",class:"nav__link"},{default:d(()=>[Se,$e]),_:1}),v(r(f),{to:"/settings",class:"nav__link nav__link--active"},{default:d(()=>[Re,Te]),_:1})])],64))}});const Ae=j(He,[["__scopeId","data-v-2ebe20d3"]]);export{Ae as default};
